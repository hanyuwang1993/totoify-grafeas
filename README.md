Grafeas + in-toto
=================

This repository provides an interface that converts
[standard in-toto link files](https://github.com/in-toto/docs/blob/master/in-toto-spec.md#44-file-formats-namekeyid-prefixlink)
into [Grafeas occurrences](https://github.com/grafeas/grafeas/blob/master/docs/grafeas_concepts.md#occurrences),
and vice versa, in an in-toto-verifiable manner.
Grafeas supports in-toto attestations as a note and occurrence kind since
v0.1.6. However, the format of the document supported in Grafeas is slightly
different from the default attestations generated by the in-toto reference
implementations.

## Support Grafeas Version
[Grafeas server v0.2.1](https://console.cloud.google.com/gcr/images/grafeas/us/grafeas-server)

## Use

To convert an in-toto link into a Grafeas in-toto occurrence:

```zsh
python link_to_occurence.py <path_to_link> <grafeas_project_id> <grafeas_note_id>
```
e.g. 
```zsh
python link_to_occurence.py metadata-links/unittest.a0a78898.link testproj intoto-unittest91b
```

This interface will return a Grafeas in-toto occurrence, which can be stored in
a Grafeas server using typical methods.

To convert a Grafeas in-toto occurrence into an in-toto link:

```zsh
python occurence_to_link.py <path_to_occurence_json> <in-toto-step-name>
```
e.g. 
```zsh
python occurence_to_link.py metadata-links/unittest-occurence.json unittest
```

This interface will return an in-toto link, which can be used to perform in-toto
verification.

